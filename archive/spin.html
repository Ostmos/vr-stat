<html>
    <head>
        <script src="scbwrapper.js"></script>
        <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
        <script src="box.js"></script>
        <script>
            AFRAME.registerComponent('spin', {
                init: function(){
                    var sceneEl = document.querySelector('a-scene');
                    var entEl = sceneEl.querySelector('.ent');
                    var boxEl = entEl.querySelector('.box');
                    var isOff = true;

                    boxEl.addEventListener('click', function (){
                        if(isOff){
                            isOff= !isOff;
                            var a = entEl.getAttribute('rotation').x;
                            var b = entEl.getAttribute('rotation').y;
                            var c = entEl.getAttribute('rotation').z;
                            entEl.querySelector('a-animation').setAttribute('rotation', {x: 0, y: 0, z: 0});
                            entEl.querySelector('a-animation').setAttribute('from', {x: a, y: b, z: c});
                            entEl.querySelector('a-animation').setAttribute('dur', 10000);
                        }else{
                            isOff= !isOff;
                            var a = entEl.getAttribute('rotation').x;
                            var b = entEl.getAttribute('rotation').y;
                            var c = entEl.getAttribute('rotation').z;
                            console.log(b);
                            entEl.querySelector('a-animation').setAttribute('dur', 0);
                            entEl.querySelector('a-entity').setAttribute('rotation', {x: a, y: b, z: c});
                        };
                    });
                }
            });
        </script>
    </head>

    <body>
        <a-scene>
            <a-entity class="ent">
                <a-animation attribute="rotation" dur="0" to="0 360 0" repeat="indefinite"></a-animation>
                <a-entity class="box" 
                          geometry="primitive: box; width: 5; height: 5; depth:5" 
                          material="color: red" 
                          position="0 10 0"
                          rotation="0 0 0"
                          spin>
                </a-entity>
            </a-entity>
            <a-plane material="color: grey" width="10" height="10" position="0 0 0" rotation="-90 0 0"></a-plane>
            <a-camera position="0 10 15">
                <a-cursor></a-cursor>
            </a-camera>
        </a-scene>
    </body>